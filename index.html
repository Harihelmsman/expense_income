<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Enhanced Income Expense Tracker</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Roboto+Mono:wght@400;500;600&display=swap");

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
      transition: all 0.3s ease;
    }

    :root {
      --primary-color: #6c5ce7;
      --accent-color: #a29bfe;
      --income-color: #00b894;
      --expense-color: #ff7675;
      --bg-gradient: linear-gradient(135deg, #a29bfe, #6c5ce7);
      --card-bg: #fff;
      --text-color: #2d3436;
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .dark-mode {
      --primary-color: #6c5ce7;
      --accent-color: #a29bfe;
      --income-color: #00b894;
      --expense-color: #ff7675;
      --bg-gradient: linear-gradient(135deg, #2d3436, #636e72);
      --card-bg: #2d3436;
      --text-color: #dfe6e9;
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    body {
      width: 100%;
      min-height: 100vh;
      background: var(--bg-gradient);
      display: flex;
      flex-direction: column;
      align-items: center;
      overflow-x: hidden;
      color: var(--text-color);
    }

    .navbar {
      width: 100%;
      padding: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: white;
      flex-wrap: wrap;
    }

    .navbar h1 {
      font-family: "Roboto Mono", monospace;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1.5rem;
    }

    .nav-links {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
    }

    .nav-links button {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      padding: 8px 12px;
      border-radius: 50px;
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      font-weight: 500;
      backdrop-filter: blur(10px);
      font-size: 0.9rem;
    }

    .nav-links button:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-3px);
    }

    .container {
      width: 95%;
      max-width: 1200px;
      margin: 15px auto;
      display: grid;
      grid-template-columns: 1fr;
      gap: 15px;
    }

    .card {
      background: var(--card-bg);
      border-radius: 20px;
      box-shadow: var(--shadow);
      padding: 20px;
      animation: fadeIn 0.5s ease-out;
      width: 100%;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .balance-card {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .balance-card h2 {
      font-size: 1.3rem;
      margin-bottom: 10px;
      color: var(--primary-color);
    }

    .balance-card .balance {
      font-size: 2.2rem;
      font-weight: 600;
      margin: 10px 0;
    }

    .inc-exp-container {
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin: 15px 0;
      gap: 15px;
      flex-direction: row;
    }

    .inc-exp-container div {
      flex: 1;
      text-align: center;
      padding: 15px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      position: relative;
      overflow: hidden;
    }

    .inc-exp-container div::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 5px;
      height: 100%;
    }

    .inc-exp-container .inc {
      border: 2px solid var(--income-color);
    }

    .inc-exp-container .inc::before {
      background-color: var(--income-color);
    }

    .inc-exp-container .exp {
      border: 2px solid var(--expense-color);
    }

    .inc-exp-container .exp::before {
      background-color: var(--expense-color);
    }

    .inc-exp-container h4 {
      margin-bottom: 8px;
      font-size: 1.1rem;
    }

    .inc-exp-container .amt {
      font-size: 1.3rem;
      font-weight: 600;
    }

    .inc-exp-container .inc .amt {
      color: var(--income-color);
    }

    .inc-exp-container .exp .amt {
      color: var(--expense-color);
    }

    /* Graph Styles */
    .graph-container {
      height: 250px;
      position: relative;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      gap: 15px;
      padding: 15px 10px;
      margin-top: 15px;
      overflow-x: auto;
    }

    .bar-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      min-width: 300px;
    }

    .axis {
      position: absolute;
      background-color: #ddd;
    }

    .y-axis {
      width: 2px;
      height: 80%;
      left: 50px;
      bottom: 50px;
    }

    .x-axis {
      width: calc(100% - 100px);
      height: 2px;
      left: 50px;
      bottom: 50px;
    }

    .bar-group {
      display: flex;
      align-items: flex-end;
      margin: 0 5px;
      position: relative;
      z-index: 2;
    }

    .bar {
      width: 25px;
      margin: 0 8px;
      border-radius: 5px 5px 0 0;
      position: relative;
      transition: height 1s ease-out;
    }

    .income-bar {
      background: linear-gradient(to bottom, var(--income-color), rgba(0, 184, 148, 0.7));
    }

    .expense-bar {
      background: linear-gradient(to bottom, var(--expense-color), rgba(255, 118, 117, 0.7));
    }

    .bar-label {
      position: absolute;
      bottom: -25px;
      font-size: 0.7rem;
      font-weight: 500;
      width: 100%;
      text-align: center;
    }

    .bar-value {
      position: absolute;
      top: -25px;
      font-size: 0.7rem;
      font-weight: 600;
      width: 100%;
      text-align: center;
    }

    /* Form Styles */
    .form-container {
      padding: 15px;
    }

    .form-container h3 {
      margin-bottom: 15px;
      color: var(--primary-color);
      font-size: 1.2rem;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 6px;
      font-weight: 500;
    }

    .form-group input {
      width: 100%;
      padding: 10px 12px;
      border: 2px solid #ddd;
      border-radius: 10px;
      font-size: 16px;
      transition: all 0.3s;
    }

    .form-group input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.2);
      outline: none;
    }

    .form-group select {
      width: 100%;
      padding: 10px 12px;
      border: 2px solid #ddd;
      border-radius: 10px;
      font-size: 16px;
      transition: all 0.3s;
      background-color: white;
      appearance: none;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="6"><path d="M0 0l6 6 6-6z" fill="%23666"/></svg>');
      background-repeat: no-repeat;
      background-position: right 10px center;
      padding-right: 30px;
    }

    .btn {
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      transition: all 0.3s;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
    }

    .btn:hover {
      background: var(--accent-color);
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    /* Transactions Styles */
    .transactions-container {
      max-height: 350px;
      overflow-y: auto;
      padding-right: 5px;
    }

    .transactions-list {
      list-style-type: none;
    }

    .transaction-item {
      padding: 12px;
      margin-bottom: 12px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      display: flex;
      justify-content: space-between;
      align-items: center;
      animation: slideIn 0.3s ease-out;
      position: relative;
      overflow: hidden;
      flex-wrap: wrap;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .transaction-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 5px;
      height: 100%;
    }

    .transaction-item.income {
      background-color: rgba(0, 184, 148, 0.1);
    }

    .transaction-item.income::before {
      background-color: var(--income-color);
    }

    .transaction-item.expense {
      background-color: rgba(255, 118, 117, 0.1);
    }

    .transaction-item.expense::before {
      background-color: var(--expense-color);
    }

    .transaction-info {
      display: flex;
      flex-direction: column;
      flex: 1;
      min-width: 150px;
    }

    .transaction-desc {
      font-weight: 600;
      margin-bottom: 5px;
      font-size: 0.95rem;
      word-break: break-word;
    }

    .transaction-date {
      font-size: 0.75rem;
      color: #888;
    }

    .transaction-amount {
      font-weight: 600;
      font-size: 1rem;
      white-space: nowrap;
      margin: 0 10px;
    }

    .transaction-item.income .transaction-amount {
      color: var(--income-color);
    }

    .transaction-item.expense .transaction-amount {
      color: var(--expense-color);
    }

    .transaction-actions {
      display: flex;
      gap: 10px;
    }

    .action-btn {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #888;
      transition: all 0.3s;
      padding: 5px;
    }

    .action-btn:hover {
      transform: scale(1.2);
    }

    .delete-btn:hover {
      color: #ff7675;
    }

    /* Categories Section */
    .pie-chart-container {
      height: 220px;
      position: relative;
      margin-top: 15px;
    }

    .chart-legend {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 8px;
      margin-top: 15px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .legend-color {
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }

    .legend-label {
      font-size: 0.75rem;
    }

    /* Mobile Menu */
    .mobile-menu-button {
      display: none;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      border-radius: 50px;
      color: white;
      padding: 8px;
      cursor: pointer;
      font-size: 1.2rem;
    }

    .mobile-menu {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--bg-gradient);
      z-index: 1000;
      padding: 20px;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 20px;
    }

    .mobile-menu-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
    }

    .mobile-menu-item {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      padding: 15px 25px;
      border-radius: 50px;
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 500;
      backdrop-filter: blur(10px);
      width: 80%;
      justify-content: center;
      font-size: 1.1rem;
    }

    /* Bottom floating action button for mobile */
    .fab-container {
      display: none;
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 100;
    }

    .fab {
      background: var(--primary-color);
      color: white;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      cursor: pointer;
      border: none;
    }

    .fab:hover {
      background: var(--accent-color);
      transform: scale(1.1);
    }

    /* Form overlay for mobile */
    .form-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 200;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(5px);
    }

    .form-popup {
      background: var(--card-bg);
      border-radius: 20px;
      width: 90%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      padding: 20px;
      position: relative;
    }

    .form-close {
      position: absolute;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      font-size: 1.2rem;
      color: var(--text-color);
      cursor: pointer;
    }

    /* Card title with actions */
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .card-header h3 {
      margin-bottom: 0;
      color: var(--primary-color);
      font-size: 1.2rem;
    }

    .card-actions {
      display: flex;
      gap: 10px;
    }

    .card-action-btn {
      background: none;
      border: none;
      color: var(--primary-color);
      cursor: pointer;
      font-size: 1.1rem;
    }

    /* Responsive Styles */
    @media (min-width: 768px) {
      .container {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .balance-card {
        grid-column: span 2;
      }
      
      .graph-card {
        grid-column: span 2;
      }

      .mobile-menu-button, .fab-container, .form-overlay {
        display: none !important;
      }
    }

    @media (min-width: 1024px) {
      .container {
        grid-template-columns: repeat(3, 1fr);
      }
      
      .balance-card {
        grid-column: span 3;
      }
      
      .graph-card {
        grid-column: span 3;
      }
    }

    @media (max-width: 767px) {
      .navbar {
        padding: 15px 20px;
      }
      
      .navbar h1 {
        font-size: 1.3rem;
      }
      
      .nav-links {
        display: none;
      }

      .mobile-menu-button {
        display: block;
      }
      
      .inc-exp-container {
        flex-direction: row;
      }
      
      .inc-exp-container h4 {
        font-size: 1rem;
      }
      
      .inc-exp-container .amt {
        font-size: 1.1rem;
      }
      
      .graph-container {
        height: 180px;
        overflow-x: auto;
        padding-bottom: 30px;
      }
      
      .bar-container {
        min-width: 400px;
      }
      
      .bar {
        width: 20px;
        margin: 0 5px;
      }
      
      .card:nth-child(3) {
        display: none;
      }
      
      .fab-container {
        display: block;
      }
      
      .transaction-item {
        padding: 10px;
      }
      
      .transaction-desc {
        font-size: 0.9rem;
      }
      
      .transaction-amount {
        font-size: 0.9rem;
      }
      
      .action-btn {
        font-size: 0.9rem;
      }
    }

    /* Mode toggle animation */
    .theme-toggler {
      position: relative;
      width: 50px;
      height: 25px;
      background-color: rgba(255, 255, 255, 0.4);
      border-radius: 25px;
      cursor: pointer;
    }

    .theme-toggler-circle {
      position: absolute;
      top: 2px;
      left: 2px;
      width: 21px;
      height: 21px;
      background-color: white;
      border-radius: 50%;
      transition: transform 0.3s ease;
      display: flex;
      justify-content: center;
      align-items: center;
      color: var(--primary-color);
      font-size: 12px;
    }

    .dark-mode .theme-toggler-circle {
      transform: translateX(25px);
    }

    /* Scrollbar Styles */
    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--primary-color);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--accent-color);
    }

    /* Touch-friendly adjustments */
    @media (max-width: 767px) {
      input, select, button {
        font-size: 16px !important; /* Prevents iOS zoom on focus */
      }
      
      .action-btn {
        padding: 8px;
      }
      
      /* Prevents pull-to-refresh on mobile */
      body {
        overscroll-behavior-y: contain;
      }
    }

    /* Active state for touch */
    @media (hover: none) {
      .btn:active {
        background: var(--accent-color);
        transform: translateY(-3px);
      }
      
      .action-btn:active {
        transform: scale(1.2);
      }
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <h1><i class="fas fa-wallet"></i> FinTrack</h1>
    <div class="nav-links">
      <button id="export-btn"><i class="fas fa-download"></i> Export</button>
      <button id="stats-btn"><i class="fas fa-chart-line"></i> Statistics</button>
      <div class="theme-toggler" id="theme-toggle">
        <div class="theme-toggler-circle">
          <i class="fas fa-sun"></i>
        </div>
      </div>
    </div>
    <button class="mobile-menu-button" id="mobile-menu-btn">
      <i class="fas fa-bars"></i>
    </button>
  </nav>

  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobile-menu">
    <button class="mobile-menu-close" id="mobile-menu-close">
      <i class="fas fa-times"></i>
    </button>
    <button class="mobile-menu-item" id="mobile-add-btn">
      <i class="fas fa-plus-circle"></i> Add Transaction
    </button>
    <button class="mobile-menu-item" id="mobile-export-btn">
      <i class="fas fa-download"></i> Export
    </button>
    <button class="mobile-menu-item" id="mobile-stats-btn">
      <i class="fas fa-chart-line"></i> Statistics
    </button>
    <div class="theme-toggler" id="mobile-theme-toggle" style="margin-top: 20px;">
      <div class="theme-toggler-circle">
        <i class="fas fa-sun"></i>
      </div>
    </div>
  </div>

  <!-- Mobile Floating Action Button -->
  <div class="fab-container">
    <button class="fab" id="mobile-fab">
      <i class="fas fa-plus"></i>
    </button>
  </div>

  <!-- Mobile Form Overlay -->
  <div class="form-overlay" id="form-overlay">
    <div class="form-popup">
      <button class="form-close" id="form-close">
        <i class="fas fa-times"></i>
      </button>
      <div class="form-container">
        <h3>Add New Transaction</h3>
        <form id="mobile-transaction-form">
          <div class="form-group">
            <label for="mobile-desc">Description</label>
            <input type="text" id="mobile-desc" placeholder="What was this transaction for?" required>
          </div>
          <div class="form-group">
            <label for="mobile-amount">Amount</label>
            <input type="number" id="mobile-amount" placeholder="Enter amount" required>
          </div>
          <div class="form-group">
            <label for="mobile-type">Type</label>
            <select id="mobile-type" required>
              <option value="income">Income</option>
              <option value="expense">Expense</option>
            </select>
          </div>
          <div class="form-group">
            <label for="mobile-category">Category</label>
            <select id="mobile-category">
              <option value="salary">Salary</option>
              <option value="business">Business</option>
              <option value="investment">Investment</option>
              <option value="food">Food</option>
              <option value="shopping">Shopping</option>
              <option value="housing">Housing</option>
              <option value="transportation">Transportation</option>
              <option value="entertainment">Entertainment</option>
              <option value="healthcare">Healthcare</option>
              <option value="other">Other</option>
            </select>
          </div>
          <button type="submit" class="btn"><i class="fas fa-plus-circle"></i> Add Transaction</button>
        </form>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="card balance-card">
      <h2>Your Balance</h2>
      <h1 id="balance" class="balance">₹ 0.00</h1>
      <div class="inc-exp-container">
        <div class="inc">
          <h4>Income</h4>
          <p id="inc-amt" class="amt">₹ 0.00</p>
        </div>
        <div class="exp">
          <h4>Expense</h4>
          <p id="exp-amt" class="amt">₹ 0.00</p>
        </div>
      </div>
    </div>

    <div class="card graph-card">
      <div class="card-header">
        <h3>Income vs Expense</h3>
        <div class="card-actions">
          <button class="card-action-btn" id="graph-scroll-left">
            <i class="fas fa-chevron-left"></i>
          </button>
          <button class="card-action-btn" id="graph-scroll-right">
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>
      <div class="graph-container" id="graph-container">
        <div class="axis y-axis"></div>
        <div class="axis x-axis"></div>
        <div class="bar-container" id="bar-container">
          <!-- Bars will be added dynamically -->
        </div>
      </div>
    </div>

    <div class="card">
      <div class="form-container">
        <h3>Add New Transaction</h3>
        <form id="transaction-form">
          <div class="form-group">
            <label for="desc">Description</label>
            <input type="text" id="desc" placeholder="What was this transaction for?" required>
          </div>
          <div class="form-group">
            <label for="amount">Amount</label>
            <input type="number" id="amount" placeholder="Enter amount" required>
          </div>
          <div class="form-group">
            <label for="type">Type</label>
            <select id="type" required>
              <option value="income">Income</option>
              <option value="expense">Expense</option>
            </select>
          </div>
          <div class="form-group">
            <label for="category">Category</label>
            <select id="category">
              <option value="salary">Salary</option>
              <option value="business">Business</option>
              <option value="investment">Investment</option>
              <option value="food">Food</option>
              <option value="shopping">Shopping</option>
              <option value="housing">Housing</option>
              <option value="transportation">Transportation</option>
              <option value="entertainment">Entertainment</option>
              <option value="healthcare">Healthcare</option>
              <option value="other">Other</option>
            </select>
          </div>
          <button type="submit" class="btn"><i class="fas fa-plus-circle"></i> Add Transaction</button>
        </form>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <h3>Transactions</h3>
        <div class="card-actions">
          <button class="card-action-btn" id="clear-transactions">
            <i class="fas fa-trash"></i>
          </button>
        </div>
      </div>
      <div class="transactions-container">
        <ul class="transactions-list" id="transactions-list">
          <!-- Transactions will be added dynamically -->
        </ul>
      </div>
    </div>

    <div class="card">
      <h3>Spending by Category</h3>
      <div class="pie-chart-container" id="pie-chart-container">
        <!-- Pie chart will be added dynamically -->
      </div>
    
      <div class="chart-legend" id="pie-chart-legend">
        <!-- Legend items will be added dynamically -->
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <script>
    // DOM Elements
    const balanceEl = document.getElementById('balance');
    const incAmtEl = document.getElementById('inc-amt');
    const expAmtEl = document.getElementById('exp-amt');
    const transactionsList = document.getElementById('transactions-list');
    const form = document.getElementById('transaction-form');
    const descInput = document.getElementById('desc');
    const amountInput = document.getElementById('amount');
    const typeSelect = document.getElementById('type');
    const categorySelect = document.getElementById('category');
    const barContainer = document.getElementById('bar-container');
    const themeToggle = document.getElementById('theme-toggle');
    const exportBtn = document.getElementById('export-btn');
    const statsBtn = document.getElementById('stats-btn');
    const pieChartContainer = document.getElementById('pie-chart-container');
    const pieChartLegend = document.getElementById('pie-chart-legend');

    // Transaction data
    let transactions = [];
    let monthlyData = {};
    
    // Colors for categories
    const categoryColors = {
      salary: '#27ae60',
      business: '#2ecc71',
      investment: '#00b894',
      food: '#e74c3c',
      shopping: '#e17055',
      housing: '#d63031',
      transportation: '#ff7675',
      entertainment: '#fd79a8',
      healthcare: '#6c5ce7',
      other: '#636e72'
    };

    // Initialize
    function init() {
      loadTransactions();
      updateSummary();
      renderTransactionsList();
      renderBarGraph();
      renderPieChart();
      setupEventListeners();
    }

    // Load transactions from localStorage
    function loadTransactions() {
      const savedTransactions = localStorage.getItem('transactions');
      if (savedTransactions) {
        try {
          transactions = JSON.parse(savedTransactions);
          // Make sure all transactions have dates
          transactions = transactions.map(t => {
            if (!t.date) t.date = new Date().toISOString();
            if (!t.category) t.category = 'other';
            return t;
          });
        } catch (error) {
          console.error('Error loading transactions:', error);
          transactions = [];
        }
      }
    }

    // Save transactions to localStorage
    function saveTransactions() {
      localStorage.setItem('transactions', JSON.stringify(transactions));
    }

    // Format amount with currency symbol
    function formatAmount(amount) {
      return `₹ ${Math.abs(amount).toFixed(2)}`;
    }

    // Calculate total, income, and expense
    function calculateSummary() {
      let income = 0;
      let expense = 0;
      
      transactions.forEach(transaction => {
        if (transaction.type === 'income') {
          income += transaction.amount;
        } else {
          expense += transaction.amount;
        }
      });
      
      const total = income - expense;
      
      return { total, income, expense };
    }

    // Update summary elements with animation
    function updateSummary() {
      const { total, income, expense } = calculateSummary();
      
      // Animate the numbers
      animateValue(balanceEl, parseFloat(balanceEl.textContent.replace('₹ ', '')), total, 1000);
      animateValue(incAmtEl, parseFloat(incAmtEl.textContent.replace('₹ ', '')), income, 1000);
      animateValue(expAmtEl, parseFloat(expAmtEl.textContent.replace('₹ ', '')), expense, 1000);
    }

    // Animate value change
    function animateValue(element, start, end, duration) {
      let startTimestamp = null;
      const step = (timestamp) => {
        if (!startTimestamp) startTimestamp = timestamp;
        const progress = Math.min((timestamp - startTimestamp) / duration, 1);
        const current = progress * (end - start) + start;
        element.textContent = `₹ ${current.toFixed(2)}`;
        if (progress < 1) {
          window.requestAnimationFrame(step);
        }
      };
      window.requestAnimationFrame(step);
    }

    // Render transactions list
    function renderTransactionsList() {
      transactionsList.innerHTML = '';
      
      if (transactions.length === 0) {
        const emptyMessage = document.createElement('p');
        emptyMessage.textContent = 'No transactions yet. Add one above!';
        emptyMessage.style.textAlign = 'center';
        emptyMessage.style.padding = '20px';
        transactionsList.appendChild(emptyMessage);
        return;
      }
      
      // Sort transactions by date (most recent first)
      const sortedTransactions = [...transactions].sort((a, b) => new Date(b.date) - new Date(a.date));
      
      sortedTransactions.forEach(transaction => {
        const { id, description, amount, type, date, category } = transaction;
        
        const item = document.createElement('li');
        item.classList.add('transaction-item');
        item.classList.add(type);
        item.dataset.id = id;
        
        const formattedDate = new Date(date).toLocaleDateString('en-US', {
          year: 'numeric',
          month: 'short',
          day: 'numeric'
        });
        
        item.innerHTML = `
          <div class="transaction-info">
            <span class="transaction-desc">${description}</span>
            <span class="transaction-date">${formattedDate} · ${category}</span>
          </div>
          <span class="transaction-amount">${type === 'income' ? '+' : '-'} ${formatAmount(amount)}</span>
          <div class="transaction-actions">
            <button class="action-btn delete-btn" data-id="${id}">
              <i class="fas fa-trash-alt"></i>
            </button>
          </div>
        `;
        
        transactionsList.appendChild(item);
      });
      
      // Add event listeners to delete buttons
      document.querySelectorAll('.delete-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const id = e.currentTarget.dataset.id;
          deleteTransaction(id);
        });
      });
    }

    // Process data for bar graph
    function processMonthlyData() {
      monthlyData = {};
      
      transactions.forEach(transaction => {
        const date = new Date(transaction.date);
        const monthYear = `${date.getMonth() + 1}/${date.getFullYear()}`;
        
        if (!monthlyData[monthYear]) {
          monthlyData[monthYear] = {
            income: 0,
            expense: 0,
            month: new Date(date.getFullYear(), date.getMonth(), 1).toLocaleDateString('en-US', { month: 'short' })
          };
        }
        
        if (transaction.type === 'income') {
          monthlyData[monthYear].income += transaction.amount;
        } else {
          monthlyData[monthYear].expense += transaction.amount;
        }
      });
      
      // Convert to array and sort by date
      return Object.entries(monthlyData)
        .map(([key, data]) => ({
          monthYear: key,
          ...data
        }))
        .sort((a, b) => {
          const [aMonth, aYear] = a.monthYear.split('/');
          const [bMonth, bYear] = b.monthYear.split('/');
          
          if (aYear !== bYear) return aYear - bYear;
          return aMonth - bMonth;
        })
        .slice(-6); // Get only the last 6 months
    }

    // Render bar graph
    function renderBarGraph() {
      barContainer.innerHTML = '';
      
      const monthlyDataArray = processMonthlyData();
      
      if (monthlyDataArray.length === 0) {
        const emptyMessage = document.createElement('p');
        emptyMessage.textContent = 'Add transactions to see your monthly trends!';
        emptyMessage.style.textAlign = 'center';
        emptyMessage.style.padding = '20px';
        barContainer.appendChild(emptyMessage);
        return;
      }
      
      // Find the maximum value for scaling
      let maxValue = 0;
      monthlyDataArray.forEach(data => {
        maxValue = Math.max(maxValue, data.income, data.expense);
      });
      
      // Calculate scale factor (80% of the container height)
      const graphHeight = document.querySelector('.graph-container').clientHeight - 100;
      const scaleFactor = graphHeight / maxValue;
      
      // Create bars for each month
      monthlyDataArray.forEach(data => {
        const barGroup = document.createElement('div');
        barGroup.classList.add('bar-group');
        
        // Income bar
        const incomeBar = document.createElement('div');
        incomeBar.classList.add('bar', 'income-bar');
        const incomeHeight = data.income * scaleFactor;
        incomeBar.style.height = `${incomeHeight}px`;
        
        const incomeValue = document.createElement('div');
        incomeValue.classList.add('bar-value');
        incomeValue.textContent = formatAmount(data.income);
        incomeBar.appendChild(incomeValue);
        
        // Expense bar
        const expenseBar = document.createElement('div');
        expenseBar.classList.add('bar', 'expense-bar');
        const expenseHeight = data.expense * scaleFactor;
        expenseBar.style.height = `${expenseHeight}px`;
        
        const expenseValue = document.createElement('div');
        expenseValue.classList.add('bar-value');
        expenseValue.textContent = formatAmount(data.expense);
        expenseBar.appendChild(expenseValue);
        
        // Month label
        const monthLabel = document.createElement('div');
        monthLabel.classList.add('bar-label');
        monthLabel.textContent = data.month;
        
        barGroup.appendChild(incomeBar);
        barGroup.appendChild(expenseBar);
        barGroup.appendChild(monthLabel);
        
        barContainer.appendChild(barGroup);
        
        // Animate bars growing
        setTimeout(() => {
          incomeBar.style.height = `${incomeHeight}px`;
          expenseBar.style.height = `${expenseHeight}px`;
        }, 100);
      });
      
      // Add axis labels
      const yAxisLabels = [0, maxValue / 2, maxValue].map(value => {
        const label = document.createElement('div');
        label.style.position = 'absolute';
        label.style.left = '10px';
        label.style.bottom = `${value * scaleFactor + 50 - 5}px`;
        label.style.fontSize = '0.7rem';
        label.style.color = '#888';
        label.textContent = `₹${Math.round(value)}`;
        return label;
      });
      
      yAxisLabels.forEach(label => {
        document.querySelector('.graph-container').appendChild(label);
      });
    }

    // Process data for pie chart
// Process data for pie chart
function processCategoryData() {
  const expensesByCategory = {};
  
  // Filter for expenses only
  const expensesOnly = transactions.filter(t => t.type === 'expense');
  
  if (expensesOnly.length === 0) {
    return [];
  }
  
  // Group by category
  expensesOnly.forEach(transaction => {
    const { category, amount } = transaction;
    if (!expensesByCategory[category]) {
      expensesByCategory[category] = 0;
    }
    expensesByCategory[category] += amount;
  });
  
  // Convert to array format for Chart.js
  return Object.entries(expensesByCategory).map(([category, amount]) => ({
    category,
    amount,
    color: categoryColors[category] || categoryColors.other
  }));
}

// Render pie chart
function renderPieChart() {
  const categoryData = processCategoryData();
  
  // Clear previous chart if exists
  if (window.expensePieChart) {
    window.expensePieChart.destroy();
  }
  
  if (categoryData.length === 0) {
    pieChartContainer.innerHTML = '<p style="text-align: center; padding: 20px;">Add expense transactions to see your spending by category!</p>';
    pieChartLegend.innerHTML = '';
    return;
  }
  
  // Create canvas for Chart.js
  pieChartContainer.innerHTML = '<canvas id="expense-pie-chart"></canvas>';
  const ctx = document.getElementById('expense-pie-chart').getContext('2d');
  
  // Prepare data for Chart.js
  const data = {
    labels: categoryData.map(item => item.category),
    datasets: [{
      data: categoryData.map(item => item.amount),
      backgroundColor: categoryData.map(item => item.color),
      borderWidth: 1
    }]
  };
  
  // Create and render pie chart
  window.expensePieChart = new Chart(ctx, {
    type: 'doughnut',
    data: data,
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          display: false
        },
        tooltip: {
          callbacks: {
            label: function(context) {
              const value = context.raw;
              return `${context.label}: ${formatAmount(value)}`;
            }
          }
        }
      }
    }
  });
  
  // Create legend
  renderPieChartLegend(categoryData);
}

// Render pie chart legend
function renderPieChartLegend(categoryData) {
  pieChartLegend.innerHTML = '';
  
  categoryData.forEach(item => {
    const legendItem = document.createElement('div');
    legendItem.classList.add('legend-item');
    
    const legendColor = document.createElement('div');
    legendColor.classList.add('legend-color');
    legendColor.style.backgroundColor = item.color;
    
    const legendLabel = document.createElement('div');
    legendLabel.classList.add('legend-label');
    legendLabel.textContent = `${item.category}: ${formatAmount(item.amount)}`;
    
    legendItem.appendChild(legendColor);
    legendItem.appendChild(legendLabel);
    pieChartLegend.appendChild(legendItem);
  });
}

// Add new transaction
function addTransaction(e) {
  e.preventDefault();
  
  if (!descInput.value.trim() || !amountInput.value.trim()) {
    alert('Please add a description and amount');
    return;
  }
  
  const transaction = {
    id: generateID(),
    description: descInput.value,
    amount: +amountInput.value,
    type: typeSelect.value,
    category: categorySelect.value,
    date: new Date().toISOString()
  };
  
  transactions.push(transaction);
  saveTransactions();
  
  // Add with animation
  renderTransactionsList();
  updateSummary();
  renderBarGraph();
  renderPieChart();
  
  // Clear form
  descInput.value = '';
  amountInput.value = '';
  typeSelect.value = 'income';
  categorySelect.value = 'salary';
  
  // Focus on description input
  descInput.focus();
}

// Generate random ID
function generateID() {
  return Math.floor(Math.random() * 1000000000);
}

// Delete transaction
function deleteTransaction(id) {
  const index = transactions.findIndex(transaction => transaction.id == id);
  
  if (index !== -1) {
    // Animate removal
    const transactionElement = document.querySelector(`.transaction-item[data-id="${id}"]`);
    transactionElement.style.opacity = '0';
    transactionElement.style.height = '0';
    transactionElement.style.margin = '0';
    transactionElement.style.padding = '0';
    
    setTimeout(() => {
      transactions.splice(index, 1);
      saveTransactions();
      renderTransactionsList();
      updateSummary();
      renderBarGraph();
      renderPieChart();
    }, 300);
  }
}

// Toggle dark/light mode
function toggleTheme() {
  document.body.classList.toggle('dark-mode');
  localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
  
  // Change icon
  const themeIcon = document.querySelector('.theme-toggler-circle i');
  if (document.body.classList.contains('dark-mode')) {
    themeIcon.className = 'fas fa-moon';
  } else {
    themeIcon.className = 'fas fa-sun';
  }
  
  // Redraw charts with new theme colors
  renderBarGraph();
  renderPieChart();
}

// Export transactions data
function exportData() {
  const dataStr = JSON.stringify(transactions, null, 2);
  const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
  
  const exportFileDefaultName = `fintrack-export-${new Date().toLocaleDateString().replace(/\//g, '-')}.json`;
  
  const linkElement = document.createElement('a');
  linkElement.setAttribute('href', dataUri);
  linkElement.setAttribute('download', exportFileDefaultName);
  linkElement.click();
}

// Show statistics modal
function showStatistics() {
  // Create modal container
  const modalContainer = document.createElement('div');
  modalContainer.className = 'modal-container';
  modalContainer.style.position = 'fixed';
  modalContainer.style.top = '0';
  modalContainer.style.left = '0';
  modalContainer.style.width = '100%';
  modalContainer.style.height = '100%';
  modalContainer.style.backgroundColor = 'rgba(0, 0, 0, 0.5)';
  modalContainer.style.display = 'flex';
  modalContainer.style.justifyContent = 'center';
  modalContainer.style.alignItems = 'center';
  modalContainer.style.zIndex = '1000';
  modalContainer.style.opacity = '0';
  modalContainer.style.transition = 'opacity 0.3s ease';
  
  // Create modal content
  const modalContent = document.createElement('div');
  modalContent.className = 'modal-content';
  modalContent.style.backgroundColor = 'var(--card-bg)';
  modalContent.style.color = 'var(--text-color)';
  modalContent.style.width = '90%';
  modalContent.style.maxWidth = '800px';
  modalContent.style.borderRadius = '20px';
  modalContent.style.padding = '30px';
  modalContent.style.boxShadow = 'var(--shadow)';
  modalContent.style.transform = 'translateY(20px)';
  modalContent.style.transition = 'transform 0.3s ease';
  
  // Calculate statistics
  const { income, expense } = calculateSummary();
  const savingsRate = income > 0 ? ((income - expense) / income * 100).toFixed(2) : 0;
  
  // Get most expensive category
  const categoryData = processCategoryData();
  let mostExpensiveCategory = { category: 'None', amount: 0 };
  if (categoryData.length > 0) {
    mostExpensiveCategory = categoryData.reduce((prev, current) => 
      (prev.amount > current.amount) ? prev : current
    );
  }
  
  // Get best savings month
  const monthlySavings = [];
  Object.values(monthlyData).forEach(data => {
    const savings = data.income - data.expense;
    const savingsPercent = data.income > 0 ? (savings / data.income * 100).toFixed(2) : 0;
    monthlySavings.push({
      month: data.month,
      savings,
      savingsPercent
    });
  });
  
  let bestSavingsMonth = { month: 'None', savings: 0, savingsPercent: 0 };
  if (monthlySavings.length > 0) {
    bestSavingsMonth = monthlySavings.reduce((prev, current) => 
      (prev.savingsPercent > current.savingsPercent) ? prev : current
    );
  }
  
  // Create statistics content
  modalContent.innerHTML = `
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
      <h2>Financial Statistics</h2>
      <button id="close-stats" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--text-color);">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
      <div style="text-align: center; padding: 15px; border-radius: 10px; background: rgba(108, 92, 231, 0.1); border: 2px solid var(--primary-color);">
        <h3 style="margin-bottom: 10px;">Savings Rate</h3>
        <p style="font-size: 2rem; font-weight: 600;">${savingsRate}%</p>
      </div>
      
      <div style="text-align: center; padding: 15px; border-radius: 10px; background: rgba(0, 184, 148, 0.1); border: 2px solid var(--income-color);">
        <h3 style="margin-bottom: 10px;">Total Income</h3>
        <p style="font-size: 2rem; font-weight: 600; color: var(--income-color);">${formatAmount(income)}</p>
      </div>
      
      <div style="text-align: center; padding: 15px; border-radius: 10px; background: rgba(255, 118, 117, 0.1); border: 2px solid var(--expense-color);">
        <h3 style="margin-bottom: 10px;">Total Expenses</h3>
        <p style="font-size: 2rem; font-weight: 600; color: var(--expense-color);">${formatAmount(expense)}</p>
      </div>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
      <div style="padding: 20px; border-radius: 10px; background: rgba(108, 92, 231, 0.05); border: 1px solid var(--primary-color);">
        <h3 style="margin-bottom: 15px;">Top Spending Category</h3>
        <div style="display: flex; align-items: center; gap: 10px;">
          <div style="width: 15px; height: 15px; border-radius: 50%; background-color: ${mostExpensiveCategory.color}"></div>
          <p>${mostExpensiveCategory.category}: ${formatAmount(mostExpensiveCategory.amount)}</p>
        </div>
        <p style="margin-top: 10px; font-size: 0.9rem;">
          This category represents ${expense > 0 ? ((mostExpensiveCategory.amount / expense) * 100).toFixed(2) : 0}% of your total expenses.
        </p>
      </div>
      
      <div style="padding: 20px; border-radius: 10px; background: rgba(108, 92, 231, 0.05); border: 1px solid var(--primary-color);">
        <h3 style="margin-bottom: 15px;">Best Savings Month</h3>
        <p>${bestSavingsMonth.month}: ${formatAmount(bestSavingsMonth.savings)}</p>
        <p style="margin-top: 10px; font-size: 0.9rem;">
          You saved ${bestSavingsMonth.savingsPercent}% of your income this month.
        </p>
      </div>
    </div>
    
    <div style="margin-top: 30px;">
      <h3 style="margin-bottom: 15px;">Money-Saving Tips</h3>
      <ul style="padding-left: 20px;">
        <li style="margin-bottom: 10px;">Consider using the 50/30/20 rule: 50% on needs, 30% on wants, and 20% on savings.</li>
        <li style="margin-bottom: 10px;">Track your expenses regularly and identify areas where you can cut back.</li>
        <li style="margin-bottom: 10px;">Set specific financial goals to stay motivated on your savings journey.</li>
      </ul>
    </div>
  `;
  
  // Append modal to body
  modalContainer.appendChild(modalContent);
  document.body.appendChild(modalContainer);
  
  // Add close event listener
  document.getElementById('close-stats').addEventListener('click', () => {
    modalContainer.style.opacity = '0';
    modalContent.style.transform = 'translateY(20px)';
    
    setTimeout(() => {
      document.body.removeChild(modalContainer);
    }, 300);
  });
  
  // Animate modal opening
  setTimeout(() => {
    modalContainer.style.opacity = '1';
    modalContent.style.transform = 'translateY(0)';
  }, 10);
}

// Setup event listeners
function setupEventListeners() {
  form.addEventListener('submit', addTransaction);
  themeToggle.addEventListener('click', toggleTheme);
  exportBtn.addEventListener('click', exportData);
  statsBtn.addEventListener('click', showStatistics);
  
  // Load theme preference
  if (localStorage.getItem('darkMode') === 'true') {
    document.body.classList.add('dark-mode');
    document.querySelector('.theme-toggler-circle i').className = 'fas fa-moon';
  }
  
  // Make expense categories change based on transaction type
  typeSelect.addEventListener('change', function() {
    categorySelect.innerHTML = '';
    
    if (this.value === 'income') {
      const incomeCategories = [
        { value: 'salary', label: 'Salary' },
        { value: 'business', label: 'Business' },
        { value: 'investment', label: 'Investment' },
        { value: 'freelance', label: 'Freelance' },
        { value: 'gift', label: 'Gift' },
        { value: 'other', label: 'Other' }
      ];
      
      incomeCategories.forEach(category => {
        const option = document.createElement('option');
        option.value = category.value;
        option.textContent = category.label;
        categorySelect.appendChild(option);
      });
    } else {
      const expenseCategories = [
        { value: 'food', label: 'Food' },
        { value: 'shopping', label: 'Shopping' },
        { value: 'housing', label: 'Housing' },
        { value: 'transportation', label: 'Transportation' },
        { value: 'entertainment', label: 'Entertainment' },
        { value: 'healthcare', label: 'Healthcare' },
        { value: 'education', label: 'Education' },
        { value: 'utilities', label: 'Utilities' },
        { value: 'travel', label: 'Travel' },
        { value: 'other', label: 'Other' }
      ];
      
      expenseCategories.forEach(category => {
        const option = document.createElement('option');
        option.value = category.value;
        option.textContent = category.label;
        categorySelect.appendChild(option);
      });
    }
  });
}

// Handle file import
function setupImportFeature() {
  // Create a hidden file input element
  const fileInput = document.createElement('input');
  fileInput.type = 'file';
  fileInput.accept = '.json';
  fileInput.style.display = 'none';
  document.body.appendChild(fileInput);
  
  // Create import button in navbar
  const importBtn = document.createElement('button');
  importBtn.innerHTML = '<i class="fas fa-upload"></i> Import';
  importBtn.addEventListener('click', () => {
    fileInput.click();
  });
  
  // Insert import button before export button
  document.querySelector('.nav-links').insertBefore(importBtn, exportBtn);
  
  // Handle file selection
  fileInput.addEventListener('change', (event) => {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      
      reader.onload = function(e) {
        try {
          const importedData = JSON.parse(e.target.result);
          
          // Validate imported data
          if (Array.isArray(importedData) && importedData.every(item => 
            item.id && item.description && item.amount && item.type)) {
              
            // Confirm import
            if (confirm(`Import ${importedData.length} transactions? This will replace your current data.`)) {
              transactions = importedData;
              saveTransactions();
              init();
              alert('Import successful!');
            }
          } else {
            alert('Invalid data format. Please import a valid FinTrack export file.');
          }
        } catch (error) {
          console.error('Import error:', error);
          alert('Error importing data. Please check the file format.');
        }
      };
      
      reader.readAsText(file);
    }
  });
}
// Add these to the setupEventListeners() function:

// Mobile menu functionality
document.getElementById('mobile-menu-btn').addEventListener('click', () => {
  document.getElementById('mobile-menu').style.display = 'flex';
});

document.getElementById('mobile-menu-close').addEventListener('click', () => {
  document.getElementById('mobile-menu').style.display = 'none';
});

// Mobile form overlay
document.getElementById('mobile-fab').addEventListener('click', () => {
  document.getElementById('form-overlay').style.display = 'flex';
});

document.getElementById('form-close').addEventListener('click', () => {
  document.getElementById('form-overlay').style.display = 'none';
});

// Mobile add transaction button
document.getElementById('mobile-add-btn').addEventListener('click', () => {
  document.getElementById('mobile-menu').style.display = 'none';
  document.getElementById('form-overlay').style.display = 'flex';
});

// Mobile form submission
document.getElementById('mobile-transaction-form').addEventListener('submit', (e) => {
  e.preventDefault();
  
  const desc = document.getElementById('mobile-desc').value;
  const amount = document.getElementById('mobile-amount').value;
  const type = document.getElementById('mobile-type').value;
  const category = document.getElementById('mobile-category').value;
  
  if (!desc.trim() || !amount.trim()) {
    alert('Please add a description and amount');
    return;
  }
  
  const transaction = {
    id: generateID(),
    description: desc,
    amount: +amount,
    type: type,
    category: category,
    date: new Date().toISOString()
  };
  
  transactions.push(transaction);
  saveTransactions();
  
  renderTransactionsList();
  updateSummary();
  renderBarGraph();
  renderPieChart();
  
  // Clear form and close overlay
  document.getElementById('mobile-desc').value = '';
  document.getElementById('mobile-amount').value = '';
  document.getElementById('mobile-type').value = 'income';
  document.getElementById('mobile-category').value = 'salary';
  document.getElementById('form-overlay').style.display = 'none';
});

// Clear transactions button
document.getElementById('clear-transactions').addEventListener('click', () => {
  if (transactions.length > 0 && confirm('Are you sure you want to delete all transactions?')) {
    transactions = [];
    saveTransactions();
    init();
  }
});

// Mobile theme toggle
document.getElementById('mobile-theme-toggle').addEventListener('click', toggleTheme);

// Graph scroll buttons (simple implementation)
document.getElementById('graph-scroll-left').addEventListener('click', () => {
  const container = document.querySelector('.graph-container');
  container.scrollBy({ left: -100, behavior: 'smooth' });
});

document.getElementById('graph-scroll-right').addEventListener('click', () => {
  const container = document.querySelector('.graph-container');
  container.scrollBy({ left: 100, behavior: 'smooth' });
});

// Mobile export and stats buttons
document.getElementById('mobile-export-btn').addEventListener('click', () => {
  document.getElementById('mobile-menu').style.display = 'none';
  exportData();
});

document.getElementById('mobile-stats-btn').addEventListener('click', () => {
  document.getElementById('mobile-menu').style.display = 'none';
  showStatistics();
});
// Initialize the app
init();
setupImportFeature();
</script>
</body>
</html>
